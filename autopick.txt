# autopick.txt 変愚蛮怒仕様
#
# このファイルの一番最後は実際に使用できる設定ファイルの具体例になっています。
# このファイルを picktype.prf という名前でlib/user/ か ~/.angband/Hengband/ の
# 下にコピーすれば、そのまま自動拾いファイルとして使用することができます。
# (Windowの場合は、lib/user/ のみ、Linux の場合は ~/.angband/Hengband/ のみが
# 使用可能です。)
#
#    ●自動拾いの使い方
#    
#      まず、変愚蛮怒の中の lib/user/ か ~/.angband/Hengband/ のディレクトリに
#      picktype.prf 又は picktype-(名前).prf というファイルを作って下さい。
#      picktype.prf はどんな名前のキャラでプレイするときでも読まれ、
#      picktype-(名前).prf は(名前)と名前がついたキャラでプレイするときだけ
#      読まれます。
#      両方ある場合は、両方読み込みますが、picktype-(名前).prf の内容のほうが
#      picktype.prf より優先されます。
#      このファイルはゲームの起動時に読まれますが、後から '$'コマンドで
#      読み直すことができます。プレイ中にファイルを書き換えたくなった時などに
#      便利でしょう。
#      次に、作ったファイルをメモ帳等の適当なエディタで編集します。
#      1行に1つのアイテムを書きます。
#      (picktype.prf, picktype-(名前).prf 合わせて)最大1009個まで登録できます。
#      頭が#の行や空行は無視されます。
#
#      以下は実際のpicktype.prfの内容の例です。
#    ---------
#    賞金首のアイテム
#    !無価値のアイテム
#
#    未判明の薬
#    未判明の巻物
#    未判明の指輪
#    未判明のアミュレット
#    未判明のロッド
#    未判明の杖
#    未判明の魔法棒
#
#    ~未鑑定の光源
#
#    未鑑定のダイス目の違う武器
#    未鑑定のダイス目25以上の武器
#    ~未鑑定の武器
#    ~未鑑定の防具
#
#    獲得
#    経験の薬
#    増強の薬
#    *破壊*
#    抹殺
#    体力回復
#    生命の薬
#    スピードの
#    致命傷の治癒の薬
#
#    ---------
#    
#      基本的に、名前の一部にファイルに書いた文字列が含まれていれば、
#      そのアイテムを自動的に拾います。
#      ただし、頭に ! がついている場合はそのアイテムを自動的に破壊します。
#      また、頭に ~ がついている場合はそのアイテムは拾うことも破壊することもせずに
#      そのまま床に残します。
#
#      picktype.prf の先頭から順番に優先的に評価するので、不要なものの破壊の
#      設定の下にその他のアイテムを拾う設定を書いたり、高級なアイテムを拾う設定
#      の下にその他の低質なアイテムを破壊する設定を書くのが便利な方法です。
#    
#      ☆ Tips
#      ☆   マップコマンド('M'キー)の使用中にさらに 'M'を押すことで、
#      ☆   自動的に拾うアイテムや床に残すアイテムを表示する事が出来ます。
#      ☆   実際にどの種類を表示するかは、オプションの設定( '='キー )の
#      ☆   「(6) アイテムの自動拾い/破壊」で設定できます。
#      ☆
#    
#      以下のようなキーワードで始まるものは特別扱いになります。
#        ・すべての〜        : すべてのアイテムが対象になります。
#        ・収集中の〜        : 既に同じ種類の物を持っているアイテムが対象になります。
#        ・未鑑定の〜        : 鑑定されていないアイテムが対象になります。
#        ・鑑定済みの〜      : 鑑定されているアイテムが対象になります。
#        ・*鑑定*済みの〜    : 完全に鑑定されているアイテムが対象になります。
#        ・無銘の〜          : 非エゴ, 非アーティファクトのアイテムが対象になります。
#        ・未判明の〜        : 効果の分からないアイテムが対象になります。
#        ・無価値の〜        : 価値のない(売却できない)アイテムが対象になります。
#        ・ダイス目の違う〜  : 殺戮の武器等でダイスの目が通常と異なるアイテムが対象になります。
#        ・ダイス目nn以上の〜: ダイス数×面数がnnで指定された数以上のアイテムが対象になります。
#        ・賞金首の〜        : 賞金首の死体または骨が対象になります。
#        ・ユニーク・モンスターの〜： ユニーク・モンスターの死体、骨、彫像が対象になります。
#        ・人間の〜          : 人間の死体または骨が対象になります。(悪魔魔法で使用)
#	 ・読めない〜        : 専門としない魔法領域の魔法書が対象になります。
#	 ・第一領域の〜      : 第一領域の魔法書が対象になります。
#	 ・第二領域の〜      : 第二領域の魔法書が対象になります。
#	 ・n冊目の           : nが1から4のとき、n冊目の魔法書が対象になります。
#    
#      〜の部分では、アイテムの種類を表す以下のようなキーワードが特別扱いになります
#        ・アイテム : すべてのアイテムが対象になります。
#        ・武器 : 武器が対象になります。
#        ・防具 : 防具が対象になります。
#        ・矢 : 矢、クロスボウの矢、石、弾が対象になります。
#        ・光源 : たいまつやランタン等が対象になります。
#        ・魔法アイテム : 巻物・杖・魔法棒・ロッドが対象になります。
#        ・がらくた : 折れた棒や像等の役に立たないものが対象になります。
#	 ・魔法書 : 魔法書、武芸の書、歌集が対象になります。
#	 ・鈍器 : 武器のうち鈍器であるものが対象になります。(プリースト用)
#
#      他に部位別の装備品を対象とするキーワード
#      盾、弓、指輪、アミュレット、鎧、クローク、兜、籠手、靴 が使用できます。
#    
#      この後に区切り記号のコロン「:」を挟んでさらに文字列が続く場合は、
#      その文字列が名前の一部に含まれているアイテムが対象になります。
#      ここで、アイテムの種類を表すキーワード(アイテム、武器、防具等)を使用しない
#      場合は区切り記号は省略できます。
#      また、文字列の頭に記号「^」を入れるとそれはアイテム名の先頭部分に一致します。
#
#    ---------
#
#    光源:石		// 名前に"石"を含む光源を拾う。「光源石」 は使用不可。
#    籠手:腕力の	// 腕力のガントレットを拾うが、腕力の指輪は拾わない。
#    !ローブ		// 名前に"ローブ"を含むもの(ローブ、グローブ等)を破壊。
#    !^ローブ		// グローブは破壊しない。
#    !防具:^耐		// 耐火、耐冷、耐電、耐酸の防具を破壊。全耐性は破壊しない。
#
#    ---------
#
#      また、行の最後に # で始まる文字列を書くと、アイテムの上に立った瞬間に
#      自動的にその文字列がアイテムに刻まれます。
#
#
#      各行の厳密な書式は次のような順番です。 
#      (以下の順番で書いた場合だけ特別扱いされます)
#
#          [すべての] [収集中の] [未鑑定の] [鑑定済みの] [*鑑定*済みの] [無銘の]
#          [未判明の] [無価値の] [ダイス目の違う] [ダイス目nn以上の]
#          [賞金首の] [ユニーク・モンスターの] [人間の]
#	   [読めない] [第一領域の] [第二領域の] [n冊目の]
#          [ アイテム|武器|防具|矢|光源|魔法アイテム|がらくた|魔法書
#	     |鈍器|盾|弓|指輪|アミュレット|鎧|クローク|兜|籠手|靴 ]
#          [:] [^] [その他の文字列] [#自動刻み文字列]
#    
#      ☆ Tips
#      ☆   未鑑定の や ダイス目の違う 等のキーワードは一行に並べて書く事で両方の制限を
#      ☆   適用させる事が出来ます。ただし、順番が決っているので注意してください。
#      ☆ 
#    
#    
#    ● 条件分岐の使い方
#    
#      自動拾いの設定は種族や職業、レベル等に条件を付けて設定することが出来ます。
#    
#      ☆ Tips
#      ☆   マクロ定義のファイル(プレイヤー名.prf 等)でも全く同じ書式で条件分岐を
#      ☆   使う事が出来ます。
#      ☆
#    
#      ・条件分岐の書式
#        ?:引数
#          引数が"0"なら以降の自動拾い／破壊の登録をスキップする。
#          引数が"1"なら以降の登録を行う。 引数が"0"以外は全て"1"と見なす。
#        (注意!)条件分岐を入れ子にすることは出来ません。
#    
#      ・ファイルの挿入の書式
#        %:ファイル名
#          /lib/user/ファイル名 か ~/.angband/Hengband/ファイル名 を自動拾いの
#	   登録ファイルとして読み込みます。
#          *警告!!* 自分自身(例えばpicktype.prf)を読み込んでしまうと
#                   永久ループになってクラッシュするので絶対やらないように。
#    
#      ・使用可能な演算子
#        [EQU 引数１ 引数２ ...]
#          全ての引数が等しいとき"1"、等しくないとき"0"を返す。
#        [IOR 引数１ 引数２ ...]
#        [AND 引数１ 引数２ ...]
#          IORは引数の論理和、ANDは引数の論理積をとって真なら"1"、偽なら"0"を返す。
#        [NOT 引数]
#          引数が"1"なら"0"、"0"なら"1"を返す。
#        [LEQ 引数１ 引数２ ...]
#        [GEQ 引数１ 引数２ ...]
#          LEQは引数の大きさを「文字列として比較」して
#          引数１≦引数２≦...のとき"1"を返す。
#          GEQは引数１≧引数２≧...のとき"1"を返す。
#    
#      ・変数説明
#        $RACE
#          種族を英語名で返す。
#          Human, Half-Elf, Elf, Hobbit, Gnome, Dwarf, Half-Orc, Half-Troll,
#          Amberite, High-Elf, Barbarian, Half-Ogre, Half-Giant, Half-Titan,
#          Cyclops, Yeek, Klackon, Kobold, Nibelung, Dark-Elf, Draconian,
#          Mindflayer, Imp, Golem, Skeleton, Zombie, Vampire, Spectre, Sprite,
#          Beastman, Ent, Archon, Balrog, Dunadan, Shadow-Fairy, Kuta, Android,
#          のどれか
#        $CLASS
#          職業を英語名で返す。
#          Warrior, Mage, Priest, Rogue, Ranger, Paladin, Warrior-Mage,
#          Chaos-Warrior, Monk, Mindcrafter, High-Mage, Tourist, Mane,
#          BeastMaster, Sorcerer, Archer, Magiceater, Bard, Red-Mage, Samurai,
#          Renkijutusi, Blue-Mage, Cavalry, Berserker, Kaji, Mirror-Master,
#	   Ninja
#          のどれか
#        $PLAYER
#          プレイヤーの名前を返す。
#        $REALM1
#          魔法領域を英語名で返す。
#          Life, Sorcery, Nature, Chaos, Death, Trump
#          Arcane, Enchantment, Daemon, Music, Bugei
#          のどれか
#        $REALM2
#          第２魔法領域を英語名で返す。
#        $LEVEL
#          プレイヤーのレベルを２桁の文字列で返す。
#          "01","09","10","50" 等
#
#------------------------------------------------------------------
#
#    これ以下は具体的に使用可能な設定例です。
#    このファイルをpicktype.prfという名前でlib/user/ か 
#    ~/.angband/Hengband/ にコピーすれば自動拾いファイルとして
#    使用することができます。
#
#------------------------------------------------------------------

#
# 基本的な設定
#

賞金首の死体
賞金首の骨

# 狂戦士は使用できない巻物、杖、魔法棒、ロッドを全て破壊する。
?:[EQU $CLASS Berserker]
!魔法アイテム
?:1

未判明のアイテム

# 未鑑定名が、玻璃瓶、石、白熱灯、星、宝石 の光源は
# アーティファクトなので拾う。
未鑑定の光源:宝石#!!
未鑑定の光源:石
未鑑定の光源:星#!!
未鑑定の光源:白熱灯
未鑑定の光源:玻璃瓶#!!

# *鑑定*済みのアーティファクトを一度床に落として拾うと耐性自動刻み'%'をする。
~*鑑定*済みの★#%
~*鑑定*済みの☆#%

# よく拾う物
全感知のロッド#!k!!
鑑定のロッド#!k!!
スピードのロッド#!k!!
無敵の薬#!k
獲得#!k
経験の薬#!k
増強の薬#!k
*破壊*
抹殺

腕力の薬#!k
賢さの薬#!k
器用さの薬#!k
耐久力の薬#!k
知能の薬#!k
魅力の薬#!k

生命の薬#!k
体力回復#!k

# 既に持っている種類の薬、巻物、ロッドは重ねられるので全て拾う。

収集中の薬
収集中の巻物
収集中のロッド

#
# 魔道具術士は吸収できるものをすべて拾う。
# アーチャーは矢の材料を拾う。
# 忍者は暗闇の光源を破壊しない。
# 吸血鬼は暗闇を作るアイテムを破壊しない。
# 
?:[EQU $CLASS Magiceater]
のロッド
の杖
の魔法棒
?:[EQU $CLASS Archer]
の骨
?:[EQU $CLASS Ninja]
~光源:暗闇の
?:[EQU $RACE Vampire]
~暗闇の巻物
~暗闇の杖
?:1

# レベルが10以上なら破壊する例
#   条件分岐の判定は自動拾いファイルを読み込むときだけ行うので
#   レベルが10以上に上がった直後はまだ登録されていません。
#   '$'コマンドで読み込むかゲームを再開するとちゃんと読み込まれます。
#
?:[GEQ $LEVEL 10]
!リンゴジュースの薬
!空のビン
!水の薬
?:1

# レベルが20以下なら自動破壊禁止で床に放置する例
?:[LEQ $LEVEL 20]
~のろまの薬
~眠りの薬
?:1

#複雑な例（誰も使わないでしょう。このままコピーする場合以外は…）
?:[AND [GEQ $LEVEL 20] [IOR [EQU $REALM1 Life] [EQU $REALM2 Life] [EQU $REALM1 Nature] [EQU $REALM2 Nature] [EQU $REALM1 Enchantment] [EQU $REALM2 Enchantment]]]
!空腹充足
!食料
!スライムモルド
!エルフの行糧
?:1


#
# 高レベルで弱い装備品を全て壊す例。「無銘の〜」の使用には細心の注意が必要。
#
?:[GEQ $LEVEL 40]
~無銘の防具:ドラゴン
~無銘の防具:エルフのクローク
~無銘の防具:影のクローク
~無銘の武器:ダイヤモンド・エッジ
~無銘の武器:粉砕のメイス
~無銘の武器:ミラー・シールド
!無銘の武器
!無銘の防具

?:[GEQ $LEVEL 20]
!無銘の武器:(+0,+0)
!無銘の防具:,+0]
?:1

#
#自分の魔法領域の魔法書に適切な自動刻みをする例。
#上級魔法書と下級魔法書の中間の優先順位に挿入する例として、
#未鑑定の武器、防具、矢を床に放置する設定を入れてあります。
#

#
#  上級魔法書
#
第一領域の4冊目の武芸の書#!k
第一領域の3冊目の武芸の書#!k
第一領域の4冊目の魔法書#@md!k
第一領域の3冊目の魔法書#@mc!k
第二領域の4冊目の魔法書#@mh!k
第二領域の3冊目の魔法書#@mg!k

# ここに上級魔法書よりは優先順位が低くて
# 下級よりは高くしたいものを書く。
# 例えば、
未鑑定のダイス目の違う武器
~未鑑定の武器
~未鑑定の防具
~未鑑定の矢

#
#  下級魔法書
#
# 職業と領域によってはわざと特定の魔法書を持たない事があるので、
# 既に持っていなければ放置。

収集中の魔法書
~第一領域の2冊目の魔法書#@mb!k
~第一領域の1冊目の魔法書#@ma!k
~第二領域の2冊目の魔法書#@mf!k
~第二領域の1冊目の魔法書#@me!k


# その他の魔法書

# 専門外の下級魔法書はレベル30以上なら全て自動破壊する。
?:[GEQ $LEVEL 30]
!読めない1冊目の魔法書
!読めない2冊目の魔法書
!読めない3冊目の秘術の魔法書
!読めない4冊目の秘術の魔法書
?:1

# 戦士と狂戦士は上級魔法書を手動で破壊すると経験値になるので、拾う。
# 生命パラディンも生命以外の魔法書を手動で破壊すると経験値になる。
?:[IOR [EQU $CLASS Warrior] [EQU $CLASS Berserker] [AND [EQU $CLASS Paladin] [EQU $REALM1 Life]]]
~読めない4冊目の秘術の魔法書
読めない4冊目の魔法書
~読めない3冊目の秘術の魔法書
読めない3冊目の魔法書
?:1

#暗黒のパラディンは生命の魔法書を手動で破壊すると経験値になる。
?:[AND [EQU $CLASS Paladin] [EQU $REALM1 Death]]
読めない4冊目の生命の魔法書
読めない3冊目の生命の魔法書
?:1

# その他の場合も上級魔法書は高く売れるので低レベルでは拾う。
?:[LEQ $LEVEL 29]
~読めない4冊目の秘術の魔法書
読めない4冊目の魔法書
~読めない3冊目の秘術の魔法書
読めない3冊目の魔法書
?:1

