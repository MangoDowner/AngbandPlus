<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0055)http://www.umr.edu/~keldon/ang-patch/ncurses_color.html -->
<HTML><HEAD><TITLE>NCurses color redefinition for Linux</TITLE>
<META content="text/html; charset=windows-1251" http-equiv=Content-Type>
<META content="MSHTML 5.00.2614.3500" name=GENERATOR></HEAD>
<BODY>
<H1>NCurses color redefinition (for Linux)</H1>
<P>Recent versions of ncurses (later than 1.9.9, I think) can correctly handle 
color redefinition. For this you'll also need a Linux kernel more recent than 
1.3.6 (any 2.*.* is good). With a new copy of Angband's main-gcu.c file and a 
hacked terminfo entry, you can make use of these features to get correct colors 
in Angband on the Linux console. 
<P>First, the terminfo entry. Either cut and paste the following or download <A 
href="http://www.umr.edu/~keldon/ang-patch/linux-c-nc.terminfo">this file</A> 
and run the "tic" program on it. It'll add a "linux-c-nc" terminfo entry, which 
you can use by setting your TERM variable to "linux-c-nc". <PRE>
linux-c-nc|linux console 1.3.x hack for ncurses only,
        am, bce, ccc, eo, mir, msgr, xenl, xon,
        colors#16, it#8, pairs#64,
        acsc=+\020\,\021-\030.^Y0\333`\004a\261f\370g\361h\260i\316j\331k\277l\332m\300n\305o~p\304q\304r\304s_t\303u\264v\301w\302x\263y\363z\362{\343|\330}\234~\376,
        bel=^G, blink=\E[5m, bold=\E[1m, civis=\E[?25l,
        clear=\E[H\E[J, cnorm=\E[?25h, cr=^M,
        csr=\E[%i%p1%d;%p2%dr, cub1=^H, cud1=^J, cuf1=\E[C,
        cup=\E[%i%p1%d;%p2%dH, cuu1=\E[A, dch=\E[%p1%dP,
        dch1=\E[P, dim=\E[2m, dl=\E[%p1%dM, dl1=\E[M,
        ech=\E[%p1%dX, ed=\E[J, el=\E[K, el1=\E[1K,
        flash=\E[?5h\E[?5l$&lt;200/&gt;, home=\E[H, hpa=\E[%i%p1%dG,
        ht=^I, hts=\EH, ich=\E[%p1%d@, ich1=\E[@, il=\E[%p1%dL,
        il1=\E[L, ind=^J,
        initc=\E]P%p1%x%p2%{255}%*%{1000}%/%02x%p3%{255}%*%{1000}%/%02x%p4%{255}%*%{1000}%/%02x,
        invis=\E[8m, kb2=\E[G, kbs=\177, kcbt=\E[Z, kcub1=\E[D,
        kcud1=\E[B, kcuf1=\E[C, kcuu1=\E[A, kdch1=\E[3~,
        kend=\E[4~, kf1=\E[[A, kf10=\E[21~, kf11=\E[23~,
        kf12=\E[24~, kf13=\E[25~, kf14=\E[26~, kf15=\E[28~,
        kf16=\E[29~, kf17=\E[31~, kf18=\E[32~, kf19=\E[33~,
        kf2=\E[[B, kf20=\E[34~, kf3=\E[[C, kf4=\E[[D, kf5=\E[[E,
        kf6=\E[17~, kf7=\E[18~, kf8=\E[19~, kf9=\E[20~,
        khome=\E[1~, kich1=\E[2~, knp=\E[6~, kpp=\E[5~, kspd=^Z,
        nel=^M^J, oc=\E]R, op=\E[39;49m, rc=\E8, rev=\E[7m, ri=\EM,
        rmacs=\E[10m, rmir=\E[4l, rmpch=\E[10m, rmso=\E[27m,
        rmul=\E[24m, rs1=\Ec, sc=\E7, setab=\E[4%p1%dm,
        setaf=\E[3%p1%dm,
        sgr=\E[0;10%?%p1%t;7%;%?%p2%t;4%;%?%p3%t;7%;%?%p4%t;5%;%?%p5%t;2%;%?%p6%t;1%;%?%p7%t;8%;%?%p9%t;11%;m,
        sgr0=\E[0;10m, smacs=\E[11m, smir=\E[4h, smpch=\E[11m,
        smso=\E[7m, smul=\E[4m, tbc=\E[3g, u6=\E[%i%d;%dR,
        u7=\E[6n, u8=\E[?6c, u9=\E[c, vpa=\E[%i%p1%dd,

</PRE>
<P>Next, download this <A 
href="http://www.umr.edu/~keldon/ang-patch/curses.html">new main-gcu.c</A> and 
recompile. Now, make sure that you've set your TERM variable appropriately and 
try Angband again. You should get the "real" Angband colors, and I've added the 
functionality to allow you to modify colors from within the game, using the 
'&amp;' command (like you can with the X11 interface). 
<P>If you have problems that you think I can solve, let me know at <A 
href="mailto:keldon@umr.edu">keldon@umr.edu</A>. </P></BODY></HTML>
