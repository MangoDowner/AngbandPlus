Compiling Instructions 
 
(note: in all cases below, the NPPAngband* directory indicates the directory to 
which you 
have chosen to download the source code.)


========================
Windows & Cygwin by Robert Ruehlmann (edited for NPPAngband)
========================

1.	Getting the free Cygwin compiler: 
Download the free Cygwin compiler. It provides a shell interface very similar to 
a normal Unix/Linux shell with many useful tools. Install it and start the 
shell. (Note: for use in windows, the computers autoexec.bat file needs to be 
edited to include a path to the Cygwin Folder.  Also, the "make" portion of 
Cygwin is not in the default download.  You have to search it out and specify 
that the download include "make".)
2.	Install the NPPAngband source code: 
Unzip and extract the zip-file "NPPAngband Source Code v0.1.0.zip" with your 
favorite archive tool (like WinZip, or untgz.exe).
3.	Compile NPPAngband: (Note: In windows open up a DOS window and go to the 
NPPAndband*\src directory) 
Go to the src-directory and run "make -f makefile.cyg install". NPPAngband 
should now be compiled and installed into the NPPAngband* folder. The executable 
file will be called Angband.exe. 
4.	Run NPPAngband: 
Go back to the NPPAngband* folder and run the Angband.exe. 

========================
Windows & lcc-win32 by Robert Ruehlmann (edited for NPPAngband): 
========================

1.	Getting the free lcc-win32 compiler: 
Download the compiler and install it. 
2.	Install the NPPAngband source: 
Unzip and extract the zip-file "NPPAngband Source Code v0.1.0.zip" with your 
favorite archive tool (like WinZip, or untgz.exe).
3.	Create the LCC project: 
Start lcc-win32. Select 'File/New/Project...' from the menu and enter 
"NPPAngband" as the project name. On the "Definition of a new project" set the 
working directory to "C:\NPPAngband*\src" (wherever you extracted the source 
code to) and then select the "Windows executable" option. Press the 'Create' 
button and answer the question about using the wizard to generate the 
application skeleton with "no". We want to use the existing NPPAngband source 
code, so we don't need the skeleton code. 
4.	Adding the NPPAngband source files to the project: 
Add all files from birth.c to load.c to the project, then add the "main-win.c" 
file with the "Add new file..." option and finally the files from melee1.c to z-
virt.c. Select "Add new file..." again, and this time select the "Resources" 
filetype and select the "angband.rc" file. 
5.	Setting various project options: 
Type "winmm.lib" in the 'Additional files to be included in the link' field. In the 'Debugger 
settings' you should change the start directory to "C:\NPPAngband*" (or again 
use your own path to the NPPAngband directory). The 'Executable to start' should 
be "C:\NPPAngband*\NPPangband.exe" (did I already mention change it to your path 
if necessary?). The settings part is now finished. When asked if you want to 
"Open ... files?" simply say no. 
6.	Compiling: 
Select 'Compiler/Generate Makefile' from the menu and wait for it to finish. Now 
select 'Compiler/Make' and NPPAngband should be compiled. 
7.	Run NPPAngband: 
Go back to the NPPAngband* folder and run the NPPAngband.exe. 

All other Compilers and Operating Systems
===============================================

The Angband source code contains many other makefiles and has been ported to 
many other different platforms besides Windows. I took my best guess at
updating them  If there are any problems, here is a list of things that may
affect compiling on other platforms:

Files added and deleted:

NPP 0.1.0:

Added squelch.c file

NPP 0.2.0:

added quest.c file

Made one change to two 
of the main.* files (main-win and main-ami), changing the name of the 2 defined 
constants (DUNGEON_HGT to MAX_DUNGEON_HGT and DUNGEON_WID to MAX_DUNGEON_WID).

NPP 0.3.0
Deleted monster.pkg and l-monst.c file.

NPP 0.3.4

I incorporated all changes from Angband 3.0.4, wich included many changes to the main.* files.
I assume they have all been tested in Angband and are correct.

In short, I deleted the lua files, which deleted the following files from the makefiles:

*The entire src\lua subdirectory.
*All files ending in *.pkg in the \src directory.
*A files starting in "L-" (the lua "C" files)
*x-spell.c
*script.c
*script.h
*The entire lib\script directory

Here is a complete list of the lua related files I deleted (I think)

(from src\lua)

LUAOBJS = \
  lua\lapi.o lua\ldebug.o lua\lmem.o lua\lstrlib.o lua\lvm.o \
  lua\tolua_lb.o lua\lauxlib.o lua\ldo.o lua\lobject.o lua\ltable.o \
  lua\lzio.o lua\tolua_rg.o lua\lbaselib.o lua\lfunc.o lua\lparser.o \
  lua\tolua_bd.o lua\tolua_tm.o lua\lcode.o lua\lgc.o \
  lua\lstate.o lua\ltm.o lua\tolua_eh.o lua\tolua_tt.o lua\ldblib.o \
  lua\llex.o lua\lstring.o lua\lundump.o lua\tolua_gp.o

TOLUAOBJS = \
  lua\tolua.o lua\tolualua.o lua\liolib.o \
  $(LUAOBJS)

(from the \src subdirectory)

script.h 
script.c 
x-spell.c 
l-object.c
l-object.pkg
l-player.c
l-player.pkg
l-random.c: 
l-random.pkg
l-ui.c
l-ui.pkg
l-misc.c
l-misc.pkg
l-spell.c
l-spell.pkg

I updated the makefiles as best as I could, but I am sure it is inevitable that
I didn't do some of them correctly.  The makefile.cyg has been tested.

-Jeff Greene

======================

======================
There is an extensive list of instructions on compiling Angband for other 
operating systems and using other compilers below. 

With the exception of adding instructions to compile the "squelch.o" (versions 
0.1.0 and above) and quest.o file (versions 0.2.0 and above) 
To the makefiles, the instructions should work as well as they work for Angband.

=================
Compiling Angband
=================

Last updated on 22th February 2004 by Robert Ruehlmann


----------------------------------------------------------------------
Quick and dirty compilation instructions
----------------------------------------------------------------------

For many platforms (including Windows and DOS), a "pre-compiled" archive
is available, which contains everything you need to install and play
Angband.  For other platforms, including most UNIX systems, you must
compile the source code yourself.  Try the following non-trivial steps:

Step 1: Acquire.   Ftp to "clockwork.dementia.org/angband/Source"
                   Try "bin" and "mget angband*.tar.gz" and "y"
Step 2: Extract.   Try "gunzip *.gz" then "tar -xvf *.tar"
Step 3: Prepare.   Try "cd angband*/".
Step 4: Configure. Try "./configure". Edit "src/config.h" if you wish.
Step 5: Compile.   Try "make".
Step 6: Install.   Try "make install".
Step 7: Play...    Try "./angband".
                   Read the "online help" via the "?" command.

Of course, if you have a compiler, you can compile a (possibly customized)
executable on almost any system.  You will need the "source archive" (as
above), which contains the standard "src" and "lib" directories, and for
some platforms (including Macintosh and Windows), you will also need an
appropriate "extra archive", which contains some extra platform specific
files, and instructions about how to use them.  Some "extra archives" may
be found at the ftp site (including "/angband/Macintosh/ext-mac.sit.bin"
and "/angband/Windows/ext-win-305.zip"), but be sure that you get a version
of the "extra archive" designed for your Angband version.

About configure:
    ./configure --help
shows which options to use.  Other settings can be tuned like this:
    env CC='cc' CPPFLAGS='-DUSE_HARDCODE' ./configure
You can set CC (compiler), CPPFLAGS (preprocessor flags),
CFLAGS (compiler flags), LDFLAGS (linker flags), and LIBS (libraries).
Configure may modify all but CC.

An alternative to configure is to edit src/h-config.h and a makefile,
probably src/Makefile.std, and run "cd src; make -f Makefile.std".


----------------------------------------------------------------------
DOS + DJGPP
----------------------------------------------------------------------
(written by Robert Ruehlmann < rr9@thangorodrim.net >)

- Install DJGPP:
	You can get the freely available DJGPP C Compiler from
	< http://www.delorie.com/djgpp/ >.  On the DJGPP-page go to the
	Zip-Picker < http://www.delorie.com/djgpp/zip-picker.html >.
	This page helps you decide which ZIP files you need to download
	and will even try to find a ftp-site near you.
	If you want to have graphics and sound then you also need the
	Allegro-library < http://www.talula.demon.co.uk/allegro/ >.
	Get all files and follow the installation instructions.
- Install the Angband source:
	Get the source code archive and the untgz tool from:
	< ftp://clockwork.dementia.org/angband/Tool/untgz.exe >.
	Then extract the source with untgz.
- Install other required files:
	Get the "extra archive" from
	< ftp://clockwork.dementia.org/angband/DOS-386/ext-dos-305.zip >.
	Go to the angband directory and unzip the ext-dos archive into it.
	Then get the graphics archive from
	< ftp://clockwork.dementia.org/angband/Extra/angband-graf.zip >
	and unzip it into the lib/xtra/graf/ folder.
- Select the makefile:
	Go to the src-directory and rename 'Makefile.dos' (or 'Makefile.ibm'
	if you don't want graphics and sound and didn't download the Allegro
	library) to 'Makefile'.
- Compile Angband:
	Run "make install".  Angband should now be compiled and installed
	into the Angband folder.
- Run Angband:
	Go back to the Angband folder and run Angband.exe.

- Possible problems:
	- Make exits with a 'Fatal: Command arguments too long' error message:
	Such problems are usually caused by using the make.exe of another
	compiler (like Borland C++ or cygwin).  DJGPP uses some clever tricks
	to get around the limitations of the MS-DOS "126 characters are enough
	for anybody" commandline that require a specific make tool.  So make
	sure that DJGPP's make.exe is the first (or only) make.exe in your
	path.  See also the DJGPP FAQ entries 16.4, 16.5, and 16.6 for further
	details.


----------------------------------------------------------------------
Windows 95/98/NT/2000 + MS Visual C++ 5.0/6.0
----------------------------------------------------------------------
(written by Robert Ruehlmann < rr9@thangorodrim.net >)

- Install the Angband source:
	Get the source code and the untgz tool from:
	< ftp://clockwork.dementia.org/angband/Tool/untgz32.exe >.
	Then extract the source with "untgz32 angband-3.0.5.tar.gz".
- Install other required files:
	Get the "extra archive" from
	< ftp://clockwork.dementia.org/angband/Windows/ext-win-303.zip >.
	Go to the angband directory and unzip the ext-win archive into it.
	Again make sure the directory structure is preserved (use the -d
	option in pkunzip).
	Then get the graphics archive from
	< ftp://clockwork.dementia.org/angband/Extra/angband-graf.zip >
	and unzip it into the lib/xtra/graf/ folder.
- Open the project-file:
	Go to the src-folder and open the file "Angband.dsw".  That opens
	Visual C++ already properly configured for compiling Angband.
- Compile Angband:
	Select "Build Angband.exe" in the Build menu.  Angband should now
	be compiled and the Angband.exe will be placed into the Angband
	folder.
- Run Angband:
	Go back to the Angband-folder and run the Angband.exe.


----------------------------------------------------------------------
Windows 95/98/NT/2000 + Borland C++ 5.5 commandline tools
----------------------------------------------------------------------
(written by Robert Ruehlmann < rr9@thangorodrim.net >)

- Getting the free commandline tools:
	Download the Borland commandline tools from
	http://www.borland.com/bcppbuilder/freecompiler/
	and follow the installation instructions.
- Install the Angband source:
	Get the source code and  the untgz tool from:
	< ftp://clockwork.dementia.org/angband/Tool/untgz32.exe >.
	Then extract the source with "untgz32 angband-3.0.5.tar.gz".
- Install other required files:
	Get the "extra archive" from
	< ftp://clockwork.dementia.org/angband/Windows/ext-win-303.zip >.
	Go to the angband directory and unzip the ext-win archive into it.
	Again make sure the directory structure is preserved (use the -d
	option in pkunzip).
	Then get the graphics archive from
	< ftp://clockwork.dementia.org/angband/Extra/angband-graf.zip >
	and unzip it into the lib/xtra/graf/ folder.
- Compile Angband:
	Open a commandline window and go to the src-directory.  Run
	"make -f makefile.bcc install".  Angband should now be compiled
	and installed into the Angband folder.
- Run Angband:
	Go back to the Angband-folder and run the Angband.exe.

- Possible problems:
	- Make exits with a "Command line too long" error message:
	Try to add the -l option to the make command.  The make util
	should have the "use long command lines" option enabled by
	default, but some people reported that this is not always
	the case.


----------------------------------------------------------------------
Windows 95/98/NT/2000 + Cygwin
----------------------------------------------------------------------
(written by Robert Ruehlmann < rr9@thangorodrim.net >)

- Getting the free Cygwin compiler:
	You can find the free Cygwin compiler at:
	< http://sources.redhat.com/cygwin/ >.  It provides a shell
	interface very similiar to a normal Unix/Linux shell with many
	useful tools. Install it and start the shell.
- Install the Angband source code
	Extract the source code with "tar -xvzf angband-3.0.5.tar.gz".
- Install other required files:
	Get the "extra archive" from
	< ftp://clockwork.dementia.org/angband/Windows/ext-win-305.zip >.
	Go to the angband directory and unzip the ext-win archive into
	it.  Then get the graphics archive from
	< ftp://clockwork.dementia.org/angband/Extra/angband-graf.zip >
	and unzip it into the lib/xtra/graf/ folder.
- Compile Angband:
	Go to the src-directory.  Run "make -f makefile.cyg install".
	Angband should now be compiled and installed into the Angband folder.
- Run Angband:
	Go back to the Angband-folder and run the Angband.exe.


----------------------------------------------------------------------
Windows 95/98/NT/2000 + LCC-win32
----------------------------------------------------------------------
(written by Robert Ruehlmann < rr9@thangorodrim.net >)

- Getting the free lcc-win32 compiler:
	Download the compiler from < http://www.cs.virginia.edu/~lcc-win32/ >
	and install it.
- Install the Angband source code
	Extract the source code with "tar -xvzf angband-3.0.5.tar.gz".
- Install other required files:
	Get the "extra archive" from
	< ftp://clockwork.dementia.org/angband/Windows/ext-win-305.zip >.
	Go to the angband directory and unzip the ext-win archive into
	it.  Then get the graphics archive from
	< ftp://clockwork.dementia.org/angband/Extra/angband-graf.zip >
	and unzip it into the lib/xtra/graf/ folder.
- Adjust the LCC-win32 makefile:
	Go to the Angband src-directory and open "Makefile.lcc" with a
	text editor.  Change the values of 'ANGBAND_PATH' and 'LCC_PATH'
	to the path of your Angband and LCC directories and save the
	Makefile.
- Compile Angband:
	Run "make -f makefile.lcc" in the Angband src-folder.  The game
	should now be compiled and installed into the Angband folder.
- Run Angband:
	Go back to the Angband-folder and run the Angband.exe.


----------------------------------------------------------------------
GNU/Linux or Unix + GCC
----------------------------------------------------------------------
(written by Robert Ruehlmann < rr9@thangorodrim.net >)

- Install the Angband source:
	Extract the source code with "tar -xvzf angband-3.0.5.tar.gz".
- Install the graphics files:
	If you want to use graphics under X11 then get the archive from
	< ftp://clockwork.dementia.org/angband/Extra/angband-graf.zip >
	and unzip it into the lib/xtra/graf/ folder.
- Compile Angband:
	Run "./configure", "make", and "make install" in the Angband
	directory.
- Run Angband:
	Start Angband with "angband".

