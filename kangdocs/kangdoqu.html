<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=windows-1252">
<META NAME="Generator" CONTENT="Microsoft Word 97">
<TITLE>kangdoqu</TITLE>
<META NAME="Template" CONTENT="C:\Program Files\Microsoft Office\Templates\Web Pages\Web Page Wizard.wiz">
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" VLINK="#800080" BACKGROUND="Image3.gif">
<DIR>

<B><FONT FACE="Garamond" SIZE=7><P>Kangband Quests</P>
</FONT><I><DL>
<DD>UNDER CONSTRUCTION (as of 6/29/98)</DD>
</B></I><DD>How to Design a Quest (as well as an entire plot):</DD>
<DD>Plots are new to Kangband as of version 2.8.2e. They involve a wilderness map and a file of quests. When a character is born, they are randomly assigned a plot number. This number determines which wilderness and quest file they use throughout the rest of their game. Right now, the game supports ten plots but this can be easily changed. Also, note that plots 3-10 are just duplicates of plot 1 until I become more creative. Modify these existing plots before you create more.</DD>
<DD>The files in LIB\EDIT are labeled as w_info#.txt and q_info#.txt where the '#' is replaced by an actual number. These files match each other based on number. For example, q_info2.txt has quests dealing with a kidnapping and w_info2.txt has the wilderness to support q_info2.txt.</DD>
<DD>Technical Note: To change the number of plots in Kangband, you must change the value in "defines.h" for MAX_PLOTS. Then, you need to create the files for the wilderness and quests in the LIB\EDIT folder. Recompile the game, and that's all you need to do. For each plot, there must be a q_info#.txt and w_info#.txt where the '#' is replaced with plot number.</DD>
<DD>To alter any given plot, you will have to modify the q_info#.txt files and the w_info#.txt files located in the LIB\EDIT folder.</DD>
<DD>&nbsp;</DD>
<DD>Step 1:<BR>
=======</DD>
<DD>The first place to start would be with the quests. You are allowed a maximum of 20 quests and it is recommended, though not necessary, that Morgoth be the last quest.</DD>
<DD>Edit the q_info#.txt file you wish to change. I am going to use the following example to explain what each value means:</DD>
<CODE><DD>N:31:Thieves Hideout<BR>
T1:There are thieves robbing my people! They live in a small<BR>
T2:burrow outside the city walls robbing people as they pass<BR>
T3:on the roads. They even sneak inside the town to mug and<BR>
T4:pillage! Your task is to go to the burrow and kill these<BR>
T5:ruffians.<BR>
Q:5:3:0:0:0:0:0:28:137:0:1<BR>
Y:36:0:0:0:0:0:0:0:0:0:0:0:0:0:0<BR>
X:99:0:10:15<BR>
D:XXXXXXXXXXXXXXX<BR>
D:XT...a....X..TX<BR>
D:XT........D..TX<BR>
D:X.........Xa..X<BR>
D:XXXXX.....XXXXX<BR>
D:XT..D.........X<BR>
D:XTa.X.........X<BR>
D:XXXXX.........X<BR>
D:X&lt;P.D.........X<BR>
D:XXXXXXXXXXXXXXX</DD>
</CODE><DD>After the N: is the quest number - this needs to be a value from 100-119. The description is what will show when you check your quest status in the game. There can be nine text lines (T1: through T9:) and each line can be up to 80 characters long. This is the description you will see when getting this quest from the Lord of the Castle.</DD>
<DD>Now for the fun part, the Q: line is all the details and configuration of the quest level. The first number is the quest type where 1 = kill monster [x] on level [y]. The only quests that use this currently are the Tarrasque, Sauron and Morgoth. A type of 2 means kill [#] monster(s) [x] on any level. Currently, this is only used when you want the standard quest to kill a monster or two... Example:</DD>
<CODE><DD>N:32:Random Monster<BR>
Q:2:0:0:0:1:0:0:0:0:0:0</DD>
</CODE><DD>A quest of type 3 is to get a special artifact. The vault quest from q_info1.txt uses this style. The artifact must be included in the v_info.txt file or the quest will obviously not work. Type 4 quests = find the exit. The volcano quest is an example. In v_info.txt, the quest exit (E) must be placed somewhere. A type 5 quest is to kill [x] monsters regardless of type on the level. This is used in the sewer quest. And, finally, the type 6 is to kill all monsters in level (regardless of breeders, summoned monsters, etc.).</DD>
<DD>Ok, that was the first value, the rest are: nummon, curnum, maxnum, level, r_idx, k_idx, y, x, revert, vaultused. Nummon is the number of monsters to kill and only currently applies to quest type 5. Curnum is the current number killed and is used to initialize values for the quests - always keep this zero. Maxnum is the maximum number to be killed and this is used when facing one creature such as the Tarrasque. Level is for quest types 1 and only currently applies to Sauron and Morgoth. R_idx is the monster index that must be killed for quest type 1. K_idx is the artifact index for quest type 3 that must be found. The values of y and x are for the placement of the quest entrance. Revert is the character you want to quest to be after it is complete (i.e. rubble, water, etc.). This value corresponds to the numeric number of any item in the f_info.txt file.</DD>
<DD>The values following Y: are for ten specific monsters and five artifacts. The monster numbers relate to the values in r_info.txt and the item numbers relate to the values in a_info.txt. When placing monsters in the quest level description, use the letters 'a' through 'j'. The items are placed with '1' through '5'.</DD>
<DD>The X: line denotes the type of vault (99 being quest types), the rating of the level, the height, and the width of the description.</DD>
<DD>The D: lines are for the quest layout. There need to be as many D: lines as defined in the height. The characters must go the length of the width. So, in the above example, there are ten D: lines since the height is 10 and there are 15 'X' going across the first line as the width is 15.</DD>
<DD>When putting in characters on the D: lines, the following symbols apply:</DD>
</DL></DIR>

<P ALIGN="RIGHT"><TABLE BORDER CELLSPACING=1 CELLPADDING=7 WIDTH=607>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=19>
<DL>
<DD><CODE>X - permanent wall</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=19>
<CODE><DL>
<DD>&lt; - stair up</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=19>
<CODE><DL>
<DD>E - quest exit</DD>
</DL></CODE></TD>
</TR>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>. - floor</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>D - door</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>P - player position</DD>
</DL></CODE></TD>
</TR>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>% - granite (outer wall)</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>E - quest exit</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>w - shallow water</DD>
</DL></CODE></TD>
</TR>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD># - granite (inner wall)</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>W - deep water</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>l - shallow lava</DD>
</DL></CODE></TD>
</TR>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>L - deep lava</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>* - treasure/trap</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>T - treasure</DD>
</DL></CODE></TD>
</TR>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>+ - secret door</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>^ - trap</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>&gt; - special quest exit</DD>
</DL></CODE></TD>
</TR>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>a - monster 1</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>b - monster 2, etc.</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>up to letter j</DD>
</DL></CODE></TD>
</TR>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>1 - artifact 1</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>2 - artifact 2, etc.</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>up to number 5</DD>
</DL></CODE></TD>
</TR>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>&amp; - monster</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>@ - meaner monster</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=1><P></P></TD>
</TR>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>9 - meaner monster + tres.</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>8 - nasty monster + treas.</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=1><P></P></TD>
</TR>
<TR><TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>, - monster and/or object</DD>
</DL></CODE></TD>
<TD WIDTH="35%" VALIGN="TOP" HEIGHT=1>
<CODE><DL>
<DD>R - random quest exit</DD>
</DL></CODE></TD>
<TD WIDTH="31%" VALIGN="TOP" HEIGHT=1><P></P></TD>
</TR>
</TABLE>
</P>

<P ALIGN="RIGHT">Note: there cannot be any spaces at the end of the D: lines. </P>
<DL>
<DD>Ok, I think that is it. You do not need to worry about any "raw" files in the LIB\DATA directory. These are regenerated per player since the plots change. So, just ignore that directory when adding quests, plots, or even just vaults. Feel free to change any of the existing quests - perhaps less random monsters and more special levels. If you design anything that you think would make a great addition to Kangband, send me the file - I may include it in the official game and will credit you in the q_info and w_info files.</DD>
<DT>&nbsp;</DT>
<DD>Step 2:</DD>
<DD>======</DD>
<DT>&nbsp;</DT>
<DD>The other piece of the quest/plot line is the wilderness area. This file must be a text file and contain characters in a ### wide by ### high rectangle. The contains all the buildings, stores, doors, trees, etc. on the wilderness or town level. It also contains any roads, lakes, mountains you may desire.</DD>
</DL>
<P><IMG SRC="Image5.gif" WIDTH=536 HEIGHT=5></P>
<P><A HREF="kangband.html">Main Page</A><B><FONT FACE="Arial" SIZE=2> | </B></FONT><A HREF="kangtodo.html">To-Do list</A><B><FONT FACE="Arial" SIZE=2> | </B></FONT><A HREF="kangdown.html">Download Area</A></P></BODY>
</HTML>
