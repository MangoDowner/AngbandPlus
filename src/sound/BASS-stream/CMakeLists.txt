#FIND_LIBRARY (BASS_LIBRARY
#    NAMES bass24
#    PATHS ${ROOT}/bass24
#)
FIND_PATH (BASS_INCLUDE_DIR bass.h
    PATHS ${ROOT}/bass24/C
)

IF (CYGWIN OR MINGW)
	SET (BASS_LIBRARY ${CMAKE_CURRENT_BINARY_DIR}${CMAKE_FILES_DIRECTORY}/libbass24.a)
	ADD_CUSTOM_COMMAND (
		OUTPUT ${BASS_LIBRARY}
		COMMAND dlltool
		--kill-at
		--def ${CMAKE_CURRENT_SOURCE_DIR}/bass24.def
		--output-lib ${BASS_LIBRARY}
	)
ENDIF (CYGWIN OR MINGW)

SET_PROPERTY (
    DIRECTORY
    PROPERTY COMPILE_DEFINITIONS
	BUILD_icon_dll
	BUILD_sound_dll
	${PLATFORM}
)

INCLUDE_DIRECTORIES (
    ${COMMONTK}/src/common-dll
    ${BASS_INCLUDE_DIR}
    ${DBWIN_HDRS}
)

SET (SOUND_DLL sound-bass-stream)

ADD_LIBRARY (${SOUND_DLL}
    SHARED
    bass.c
    ${BASS_LIBRARY}
)

SET_TARGET_PROPERTIES (${SOUND_DLL}
    PROPERTIES PREFIX ""
)

TARGET_LINK_LIBRARIES (${SOUND_DLL}
    ${BASS_LIBRARY}
    ${DBWIN_LIB}
    gdi32
)

INSTALL (
	TARGETS ${SOUND_DLL}
	RUNTIME DESTINATION lib
)
